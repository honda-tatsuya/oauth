<div id="mode_auth">
	client_id: <input type="text" id="client_id">
	scope: <input type="text" id="scope">
	<button onClick="auth()">Auth</button>
</div>

<div id="mode_token">
	code: <span id="code"></span>
	client_id: <input type="text" id="client_id2">
	client_secret: <input type="text" id="client_secret">
	<button onClick="token()">Auth</button>
	<pre id="result"></pre>
</div>

<script>

const $ = id => document.getElementById(id);
const redirect_uri = location.href.substr(0, location.href.lastIndexOf("/") + 1);

const i = location.search.indexOf("=");
if(i == -1) {
	$("mode_token").style.display = "none";
} else {
	$("mode_auth").style.display = "none";
	$("code").innerText = location.search.substr(i + 1);
}

function auth() {
	location.href = "https://accounts.google.com/o/oauth2/v2/auth?" + [
		`response_type=code`,
		`client_id=${$("client_id").value}`,
		`redirect_uri=${redirect_uri}`,
		`scope=${$("scope").value}`,
		`access_type=offline`,
	].join("&");
}

function token() {
	var req = new XMLHttpRequest();
	req.open("POST", "https://www.googleapis.com/oauth2/v4/token", false);
	req.send([
		`code=${$("code").innerText}`,
		`client_id=${$("client_id").value}`,
		`client_secret=${$("client_secret").value}`,
		`redirect_uri=${redirect_uri}`,
		`grant_type=authorization_code`,
		`access_type=offline`
	].join("&"));
	$("result").innerText = req.responseText;
}

</script>